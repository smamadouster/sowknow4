# SOWKNOW Cron Configuration
# Add these entries to crontab (crontab -e)

# Resource monitoring every 5 minutes (PRD: alerts trigger after 5 min sustained)
# - SOWKNOW memory >6GB: WARNING
# - VPS memory >80%: CRITICAL  
# - 5xx error rate >5%: CRITICAL
*/5 * * * * /root/development/src/active/sowknow4/scripts/monitor_resources.sh >> /var/log/sowknow-monitor.log 2>&1

# Monitor alerts every 5 minutes (PRD: alerts trigger after 5 min sustained)
*/5 * * * * /root/development/src/active/sowknow4/scripts/monitor-alerts.sh >> /var/log/sowknow-cron.log 2>&1

# Daily health check at 9 AM (PRD: daily anomaly reports at 09:00)
0 9 * * * /root/development/src/active/sowknow4/scripts/monitor.sh >> /var/log/sowknow-health.log 2>&1

# Daily PostgreSQL backup at 2 AM (using backup.sh)
0 2 * * * /root/development/src/active/sowknow4/scripts/backup.sh >> /var/log/sowknow_backup.log 2>&1

# Monthly restore test (first Sunday of month at 3 AM)
0 3 1-7 * 0 /root/development/src/active/sowknow4/scripts/restore_test.sh >> /var/log/sowknow_restore_test.log 2>&1

# Log rotation (daily)
0 0 * * * /root/development/src/active/sowknow4/scripts/rotate-logs.sh
